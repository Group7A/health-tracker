<div class="container">
    <div class="lowerNav text-center">
      <div class="textLN">
        <a ng-click="showPopular()" class="left" 
            ng-class="showCommunity ? underline : no-underline" href="">Popular Recipes</a>
        <a ng-click="showMyRecipes()" ng-show="vm.authentication.user"
            ng-class="showCommunity ? no-underline : underline" href="">My Recipes</a>
      </div>
    </div>

    <div ui-view></div>

    <div class="dropMenu">
      <div class="dropdown">
        Filter by:
        <button class="btn btn-secondary dropdown-toggle btn-prop" type="button" id="dropdownMenuButton" data-toggle="dropdown" 
            aria-haspopup="true" aria-expanded="false" onclick="filterSelection('calories')">
          Calories
          <span class="caret"></span></a>
        </button>
        <div class="dropdown-menu filter-dropdown" aria-labelledby="dropdownMenuButton">
          <input type="range" min="0" max="1000" value="500" class="slider" id="calories">
          <center><span id="calVal"></span> Calories</center>
        </div>
      </div>
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle btn-prop" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Diet
          <span class="caret"></span></a>
        </button>
        <div class="dropdown-menu filter-dropdown" aria-labelledby="dropdownMenuButton">
          <li><a href="" class="small" data-value="vegan" tabIndex="-1"><input type="checkbox"/>&nbsp;Vegan</a></li>
          <li><a href="" class="small" data-value="pescetarian" tabIndex="-1"><input type="checkbox"/>&nbsp;Pescetarian</a></li>
          <li><a href="" class="small" data-value="ovo-vegetarian" tabIndex="-1"><input type="checkbox"/>&nbsp;Ovo Vegetarian</a></li>
          <li><a href="" class="small" data-value="lacto-vegetarian" tabIndex="-1"><input type="checkbox"/>&nbsp;Lacto-Vegetarian </a></li>
          <li><a href="" class="small" data-value="lacto-ovo-vegetarian" tabIndex="-1"><input type="checkbox"/>&nbsp;Lacto-Ovo-Vegetarian</a></li>
        </div>
      </div>
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle btn-prop" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Cooking Style
          <span class="caret"></span></a>
        </button>
        <div class="dropdown-menu filter-dropdown" aria-labelledby="dropdownMenuButton">
          <li><a href="#" class="small" data-value="fried" tabIndex="-1"><input type="checkbox"/>&nbsp;Fried</a></li>
          <li><a href="#" class="small" data-value="grilled" tabIndex="-1"><input type="checkbox"/>&nbsp;Grilled</a></li>
          <li><a href="#" class="small" data-value="baked" tabIndex="-1"><input type="checkbox"/>&nbsp;Baked</a></li>
        </div>
      </div>
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle btn-prop" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Rating
          <span class="caret"></span></a>
        </button>
        <div class="dropdown-menu filter-dropdown" aria-labelledby="dropdownMenuButton">
          <div class="acidjs-rating-stars">
            <form id="rating">
                <input type="radio" name="group-1" id="group-1-0" value="5" /><label for="group-1-0"></label>
                <input type="radio" name="group-1" id="group-1-1" value="4" /><label for="group-1-1"></label>
                <input type="radio" name="group-1" id="group-1-2" value="3" /><label for="group-1-2"></label>
                <input type="radio" name="group-1" id="group-1-3" value="2" /><label for="group-1-3"></label>
                <input type="radio" name="group-1" id="group-1-4" value="1" /><label for="group-1-4"></label>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- COMMUNITY RECIPES -->
    <div ng-show="showCommunity" ng-repeat="userRecipes in communityRecipes">
      <div class="row row-margin">
        <div ng-repeat="recipe in userRecipes" class="col-xs-12 col-sm-6 col-md-3 properties">
          <img class="img-prop" src="http://drpattydental.com/wp-content/uploads/2017/05/placeholder.png">
          <div class="card-info2"></div>
          <div class="card-info">
            <h3 class="card-name">
              <a ui-sref="details({recipeDetails: recipe})" style="text-decoration: none">
                {{recipe.name}}
              </a>
            </h3>
            <div class="card-icon-container">
              <ul class="nav navbar-nav navbar-right" ng-hide="vm.user">
                <!--<img class="card-icon" src="https://manylivescm.com/wp-content/uploads/2014/03/icon-glutenfree.png">
                <img class="card-icon" src="http://www.theproteinbakeshop.com/ae/files/icon-no-refined-sugar.png">-->
              </ul>
              <div id="stars">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
              </div>
              <ul class="nav navbar-nav navbar-right">
                <img class="card-icon" src="https://manylivescm.com/wp-content/uploads/2014/03/icon-glutenfree.png">
                <img class="card-icon" src="http://www.theproteinbakeshop.com/ae/files/icon-no-refined-sugar.png">
                <a ng-show="vm.authentication.user" href="">
                  <span class="glyphicon glyphicon-plus" ng-click="add(recipe)"></span>
                </a>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--MY RECIPES-->
    <div ng-hide="showCommunity">
      <div class="row row-margin">
        <div ng-repeat="myRecipe in myRecipes" class="col-xs-12 col-sm-6 col-md-3 properties">
          <img class="img-prop" src="http://drpattydental.com/wp-content/uploads/2017/05/placeholder.png">
          <div class="card-info2"></div>
          <div class="card-info">
            <h3 class="card-name">
              <a ui-sref="details({recipeDetails: myRecipe})" style="text-decoration: none">
                {{myRecipe.name}}
              </a>
            </h3>
            <div class="card-icon-container">
              <ul class="nav navbar-nav navbar-right" ng-hide="vm.authentication.user">
                <!--<img class="card-icon" src="https://manylivescm.com/wp-content/uploads/2014/03/icon-glutenfree.png">
                <img class="card-icon" src="http://www.theproteinbakeshop.com/ae/files/icon-no-refined-sugar.png">-->
              </ul>
              <div id="stars">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star"></span>
                <span class="fa fa-star"></span>
              </div>
              <ul class="nav navbar-nav navbar-right">
                <img class="card-icon" src="https://manylivescm.com/wp-content/uploads/2014/03/icon-glutenfree.png">
                <img class="card-icon" src="http://www.theproteinbakeshop.com/ae/files/icon-no-refined-sugar.png">
                <a ng-show="vm.authentication.user">
                  <span class="glyphicon glyphicon-minus" ng-click="delete(myRecipe)"></span>
                </a>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script type="text/javascript">
  var options = [];
  $( '.dropdown-menu a' ).on( 'click', function( event ) {
    var $target = $( event.currentTarget ),
        val = $target.attr( 'data-value' ),
        $inp = $target.find( 'input' ),
        idx;

    if ( ( idx = options.indexOf( val ) ) > -1 ) {
        options.splice( idx, 1 );
        setTimeout( function() { $inp.prop( 'checked', false ) }, 0);
    } 
    else {
        options.push( val );
        setTimeout( function() { $inp.prop( 'checked', true ) }, 0);
    }
    
    $( event.target ).blur();

    console.log( options );
    return false;
  });
</script>
